<section ng-init="vm.init()" class="header-height">
    <!--<div class="page-header">
    <h1>{{vm.order._id ? 'Edit Order' : 'New Order'}}</h1>
  </div>-->
    <div class="row">
        <div class="col-md-7 round1">
            <form name="vm.form.orderForm" class="form-horizontal" ng-submit="vm.save(vm.form.orderForm.$valid)" novalidate>
                <fieldset>
                    <div class="row" style="margin-top:10px; margin-bottom:10px;">
                        <div class="col-md-8">
                            <div class="row">
                                <div class="col-md-2">
                                    <i class="fa fa-user fa-4x" aria-hidden="true"></i>
                                </div>
                                <div class="col-md-10">
                                    <label>{{vm.authentication.user.displayName}}</label><br>
                                    <abbr>{{vm.order.docno}}</abbr><br>
                                    <abbr>Link:https://bill.sellsuki.com/th/b/gmoUqPz</abbr>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <p class="textRight" for="">วันที่สั่งจอง {{vm.order.docdate | date:'dd/MM/yyyy'}}</p>
                        </div>
                    </div>
                    <div class="row form-group alert alert-success hidden-xs show-sm show-md show-lg">
                        <div class=" col-xs-3 col-sm-3 col-md-3">
                            <strong>Product</strong>
                        </div>
                        <div class=" col-xs-2 col-sm-2 col-md-2">
                            <strong>Qty</strong>
                        </div>
                        <div class=" col-xs-3 col-sm-3 col-md-3">
                            <strong>Price</strong>
                        </div>
                        <div class="col-xs-3 col-sm-3 col-md-3">
                            <strong>Amount</strong>
                        </div>
                        <div class="col-xs-1 col-sm-1 col-md-1">
                        </div>
                    </div>
                    <div class="row form-group hidden-xs show-sm show-md show-lg" ng-repeat="product in vm.order.items">
                        <div class=" col-xs-3 col-sm-3 col-md-3">
                            <select name="shipping" class="form-control" ng-options="item as item.name for item in vm.products track by item._id " ng-model="product.product"
                                ng-change="vm.productChanged(product)"></select>
                        </div>
                        <div class=" col-xs-2 col-sm-2 col-md-2">
                            <input name="qty" type="number" ng-model="product.qty" id="total" class="form-control" placeholder="QTY" ng-change="vm.calculate(product)">
                        </div>
                        <div class=" col-xs-3 col-sm-3 col-md-3">
                            <input name="price" type="number" ng-model="product.product.price" id="total" class="form-control" placeholder="price">
                        </div>
                        <div class="col-xs-3 col-sm-3 col-md-3 ">
                            {{product.amount}}
                        </div>
                        <div class="col-xs-1 col-sm-1 col-md-1">
                            <button type="button" class="btn btn-danger" ng-click="vm.removeItem($index)"><span class="glyphicon glyphicon-trash"></span></button>
                        </div>
                    </div>
                    <!---->
                    <div class="row alert alert-success show-xs hidden-sm hidden-md hidden-lg">
                        <div class=" col-xs-12">
                            <strong>Product</strong>
                        </div>
                    </div>
                    <div class="row form-group show-xs hidden-sm hidden-md hidden-lg" ng-repeat="product in vm.order.items">
                        <div class="row">
                            <div class="col-xs-12">
                                <select name="shipping" class="form-control" ng-options="item as item.name for item in vm.products track by item._id " ng-model="product.product"
                                    ng-change="vm.productChanged(product)"></select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <input name="qty" type="number" ng-model="product.qty" id="total" class="form-control textRight" placeholder="QTY" ng-change="vm.calculate(product)">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <input name="price" type="number" ng-model="product.product.price" id="total" class="form-control textRight" placeholder="price">
                            </div>
                        </div>

                        <div class="row fadePortrait">
                            <div class="col-xs-8">
                                <span class="form-control noneBorder">Total: {{product.amount}} </span>
                            </div>
                            <div class="col-xs-4 textCenter">
                                <button type="button" class="btn btn-danger" ng-click="vm.removeItem($index)"><span class="glyphicon glyphicon-trash"></span></button>
                            </div>
                        </div>
                        <div class="row fadeLandscape">
                            <div class="col-xs-9 marRight">
                                <span class="form-control noneBorder">Total: {{product.amount}} </span>
                            </div>
                            <div class="col-xs-2 textRight">
                                <button type="button" class="btn btn-danger" ng-click="vm.removeItem($index)"><span class="glyphicon glyphicon-trash"></span></button>
                            </div>
                        </div>
                    </div>

                    <div class="row form-group show-xs hidden-sm hidden-md hidden-lg">
                        <div class="col-xs-12">
                            <button type="button" class="btn btn-primary btn-block" ng-click="vm.selectedProduct()">Add</button>
                        </div>
                    </div>

                    <div class="row form-group  hidden-xs show-sm show-md show-lg">
                        <div class="col-sm-6 col-md-6">
                            <button type="button" class="btn btn-primary" ng-click="vm.selectedProduct()">Add</button>
                        </div>
                        <div class="col-sm-6 col-md-6" ng-show="vm.order.deliverystatus=='paid'">
                            <button type="button" class="btn btn-primary" ng-click="tacking=true">แจ้งจัดส่ง</button>
                        </div>
                        <div ng-show="tacking" ng-show="vm.order.deliverystatus=='paid'">
                            <input type="text" ng-model="vm.order.trackingnumber">
                            <button type="button" ng-click="vm.sent($valid)">ยืนยัน</button>
                        </div>
                        <div ng-show="vm.order.deliverystatus=='sent'">
                            <button type="button" ng-click="vm.complete($valid)">ออเดอร์สำเร็จ</button>
                        </div>
                        <div ng-show="vm.order.deliverystatus=='complete'">
                            <button type="button" ng-click="vm.closeOrder($valid)">ปิดออเดอร์</button>
                        </div>
                    </div>

                    <div class="row form-group">
                        <div class="col-md-9">
                        </div>
                        <div class="col-md-3">
                            <div class="row form-group">
                                <div class="col-md-12 ">
                                    <label class="control-label">Amount</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12 form-group">
                                    <input type="text" ng-model="vm.order.amount" class="form-control" placeholder="Amount">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row form-group">
                        <div class="col-md-9">
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <div class="col-md-12 ">
                                    <button type="submit" class="btn btn-default">{{vm.order._id ? 'Update' : 'Create'}}</button>
                                </div>
                            </div>
                            <div ng-show="vm.error" class="text-danger">
                                <strong ng-bind="vm.error"></strong>
                            </div>

                        </div>
                    </div>
                </fieldset>
            </form>
        </div>
        <div class="col-md-3 round1">
            <form class="form-horizontal">
                <fieldset>
                    <button type="text" class="btn btn-primary btn-block">สถานะ : {{vm.order.deliverystatus}}</button>
                    <div class="container">
                        <ul class="nav nav-tabs">
                            <li class="active"><a data-toggle="tab" href="#home">ข้อมูลการชำระ</a></li>
                            <li><a data-toggle="tab" href="#menu1">ที่อยู่จัดส่ง</a></li>
                        </ul>
                        <div class="tab-content">
                            <div id="home" class="tab-pane fade in active">
                                <div class="row form-group" ng-hide="confirmed">
                                    <div class="col-sm-12 col-md-12">
                                    <p>จำนวนเงิน : {{vm.order.amount}}</p>
                                    <p>สถานะ : {{vm.order.deliverystatus}}</p>
                                    <button ng-click="pending=true;confirmed=true" type="button">บันทึกเอง</button>
                                    </div>
                                </div>

                                <div class="row form-group" ng-show="pending">
                                    <div class="col-sm-12 col-md-12">
                                        <select name="singleSelect" ng-model="vm.order.accounting">
                                            <option value="bank">Bank</option>
                                            <option value="cash">Cash</option>
                                        </select>
                                    </div>
                                    <div>
                                        <input type="text" name="" value="{{vm.order.amount}}">
                                    </div>
                                    <div>
                                        <input type="date" name="" value=""> <input type="time" name="" value="">
                                    </div>
                                    <div>
                                        <input type="file" name="" value="เลือกรูป">
                                    </div>
                                    <div>
                                        <input type="text" name="" value="{{vm.order.shipping.firstName}}">
                                    </div>
                                    <div>
                                        <input type="text" name="" value="{{vm.order.shipping.tel}}">
                                    </div>
                                    <div>
                                        <textarea rows="3" cols="20">{{vm.order.shipping.tel}}</textarea>
                                    </div>
                                    <div>
                                        <input type="text" name="" value="{{vm.order.shipping.tel}}">
                                    </div>
                                    <div>
                                        <input type="text" name="" value="{{vm.order.shipping.address}}">
                                    </div>
                                    <div>
                                        <input type="text" name="" value="{{vm.order.shipping.postcode}}">
                                    </div>
                                    <div>
                                        <button ng-click="confirmed=false;pending=false" type="button">ยกเลิก</button>
                                        <button
                                            ng-click="paid=true;pending=false;vm.pending($valid)" type="button">แจ้ง</button>
                                    </div>
                                </div>


                                <div class="form-group" ng-show="paid">
                                    <div>
                                        <p>จำนวนเงิน : {{vm.order.amount}}</p>
                                        <p>วันที่โอน : {{vm.order.created}}</p>
                                        <p>{{vm.order.accounting}}</p>
                                        <div>
                                            <button ng-click="vm.paid($valid)" type="button">ยืนยันการชำระเงิน</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="menu1" class="tab-pane fade">
                                <strong>ที่อยู่จัดส่ง</strong>
                                <div>
                                    <input type="text" name="" value="{{vm.order.shipping.firstName + ' ' + vm.order.shipping.lastName}}">
                                </div>
                                <div>
                                    <input type="text" name="" value="{{vm.order.shipping.tel}}">
                                </div>
                                <div>
                                    <input type="text" name="" value="{{vm.order.shipping.address}}">
                                </div>
                                <div>
                                    <input type="text" name="" value="{{vm.order.shipping.postcode}}">
                                </div>
                                <div>
                                    <input type="text" name="" value="{{vm.order.shipping.email}}">
                                </div>
                                <div>
                                    <p>หมายเลขพัสดุ</p>
                                    <input type="text" name="" value="{{vm.order.trackingnumber}}">
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--<div ng-show="vm.order._id">
              <select name="singleSelect" ng-model="vm.order.deliverystatus">
              <option value="confirmed">confirmed</option>
              <option value="pending">pending</option>
              <option value="paid">paid</option>
              <option value="sent">sent</option>
              <option value="complete">complete</option>
              <option value="close">close</option>
              </select>
                            </div>-->
                </fieldset>
            </form>
        </div>
        <div class="col-md-2 round1">
            <form name="vm.form.orderForm" class="form-horizontal" ng-submit="vm.save(vm.form.orderForm.$valid)" novalidate>
                <fieldset>
                    <div class="well well-sm">ประวัติการทำรายการล่าสุด</div>
                </fieldset>
            </form>
        </div>
    </div>
</section>